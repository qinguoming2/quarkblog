<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta name="generator" content="Quarkdown">
    <meta charset="UTF-8">
    <meta name="description" content="a blog demo">
    <meta name="author" content="qinguoming">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="quarkdown:root-path" content="..">
    <title>blog</title>
    <script src="../script/quarkdown.js"></script>
    <script>const capabilities = window.quarkdownCapabilities</script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css" rel="stylesheet">
    <link href="../theme/theme.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.9.0/highlightjs-line-numbers.min.js"></script>
    <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
    <link href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css" rel="stylesheet">
    <script>capabilities.code = true;</script>
    <style>@font-face { font-family: '-503305824'; src: local('Consolas'); }

body {
    --qd-code-custom-font: '-503305824';
    --qd-main-font-size: 12.0pt;}

body.quarkdown-plain.quarkdown-plain,
body.quarkdown-docs.quarkdown-docs {
}

body.quarkdown-slides.quarkdown-slides .reveal {
}

@page {
    size: auto auto;
    margin: 0;}

p {
}</style>
    <script>prepare(new PlainDocument());</script>
<template id="sidebar-template"><nav class="sidebar" role="doc-toc"><ol><li data-target-id="mpmathåº“ç¬”è®°" data-depth="1"><a href="#mpmathåº“ç¬”è®°">Mpmathåº“ç¬”è®°</a><ol><li data-target-id="_1-introduction" data-depth="3"><a href="#_1-introduction">1. Introduction</a></li><li data-target-id="_2-basic-features" data-depth="3"><a href="#_2-basic-features">2. BASIC FEATURES</a></li><li data-target-id="_24-å®ç”¨å‡½æ•°" data-depth="3"><a href="#_24-å®ç”¨å‡½æ•°">2.4 å®ç”¨å‡½æ•°</a></li><li data-target-id="_25-plottingå‡½æ•°" data-depth="3"><a href="#_25-plottingå‡½æ•°">2.5 plottingå‡½æ•°</a></li><li data-target-id="_3-é«˜çº§ç‰¹æ€§" data-depth="2"><a href="#_3-é«˜çº§ç‰¹æ€§">3. é«˜çº§ç‰¹æ€§</a><ol><li data-target-id="_31-çŸ©é˜µ" data-depth="3"><a href="#_31-çŸ©é˜µ">3.1 çŸ©é˜µ</a></li></ol></li></ol></li></ol></nav>
</template>  </head>
  <body class="quarkdown quarkdown-plain">
    <aside class="margin-area" id="margin-area-left"></aside>
    <main><div class="page-break" data-hidden=""></div><h1 id="mpmathåº“ç¬”è®°">Mpmathåº“ç¬”è®°</h1><p>Numpy å’Œ MpMath éƒ½æ˜¯ Python ä¸­å¸¸ç”¨çš„æ•°å­¦åº“,å®ƒä»¬éƒ½æä¾›äº†è®¸å¤šæ•°å­¦å‡½æ•°å’Œå·¥å…·,ä½†å®ƒä»¬çš„è®¾è®¡ç›®çš„å’Œå®ç°æ–¹å¼æœ‰æ‰€ä¸åŒ. Numpy ä¸»è¦ç”¨äºå¤„ç†å¤§è§„æ¨¡çš„æ•°å€¼æ•°æ®,è€Œ MpMath åˆ™ä¸“æ³¨äºé«˜ç²¾åº¦è®¡ç®—å’Œç¬¦å·è®¡ç®—.</p><p>è™½ç„¶ Numpy å’Œ MpMath çš„è®¾è®¡ç›®çš„ä¸åŒ,ä½†å®ƒä»¬ä¹‹é—´å¯ä»¥è¿›è¡Œäº’æ“ä½œ.å…·ä½“æ¥è¯´,å¯ä»¥å°† Numpy æ•°ç»„è½¬æ¢ä¸º MpMath çš„é«˜ç²¾åº¦æ•°å€¼ç±»å‹,ç„¶åä½¿ç”¨ MpMath çš„å‡½æ•°è¿›è¡Œè®¡ç®—.åŒæ ·åœ°,ä¹Ÿå¯ä»¥å°† MpMath çš„æ•°å€¼ç±»å‹è½¬æ¢ä¸º Numpy æ•°ç»„,ç„¶åä½¿ç”¨ Numpy çš„å‡½æ•°è¿›è¡Œè®¡ç®—.</p><pre><code class="language-python"># import mpmath as mp
from mpmath import *
from icecream import ic
mp.dps = 50         # Set precision
print(mpf(2)**mpf(&#39;0.5&#39;))</code></pre><h3 id="_1-introduction">1. Introduction</h3><h4 id="_12-basic-usage-of-mpmath">1.2 Basic usage of mpmath</h4><p>mpmathçš„æ•°å€¼ç±»å‹: mpf(real float),mpc(complex float),matrix</p><pre><code class="language-python">print(mp.dps)
print(mp.cos(3.14))

a1=mpf(4)
a2=mpf(&#39;4.0&#39;)
ic(a1,a2)
a3=mpf(&quot;1.25e6&quot;)
ic(a3)
a4=mpf(&quot;-inf&quot;)
ic(a4)

a5=mpc(1,2)
ic(a5)
a6=mpc(complex(1,20))
ic(a6)

ic(a5.conjugate())  # å…±è½­å¤æ•°
ic(a5.real)         # å®éƒ¨
ic(a5.imag)         # è™šéƒ¨</code></pre><p>Mpmathä½¿ç”¨å…¨å±€å·¥ä½œç²¾åº¦;å®ƒä¸è·Ÿè¸ªå•ä¸ªæ•°å­—çš„ç²¾åº¦æˆ–å‡†ç¡®æ€§.æ‰§è¡Œç®—æœ¯è¿ç®—æˆ–è°ƒç”¨mpf()å°†ç»“æœèˆå…¥åˆ°å½“å‰çš„å·¥ä½œç²¾åº¦.å·¥ä½œç²¾åº¦ç”±ä¸€ä¸ªåä¸ºmpçš„ä¸Šä¸‹æ–‡å¯¹è±¡æ§åˆ¶</p><pre><code class="language-python">print(mp)
# Mpmath settings:
#   mp.prec = 169               [default: 53]
#   mp.dps = 50                 [default: 15]
#   mp.trap_complex = False     [default: False]

# prec---äºŒè¿›åˆ¶ç²¾åº¦
# dps---åè¿›åˆ¶ç²¾åº¦
#  prec = 3.33*dps

# å½“åˆ›å»ºä¸€ä¸ªæ–°çš„mpfæ—¶,è¯¥å€¼æœ€å¤šå°†ä¸è¾“å…¥ä¸€æ ·å‡†ç¡®
#!!è­¦å‘Š: å°†mpmathæ•°å­—ä¸Pythonæµ®ç‚¹æ•°æ··åˆä½¿ç”¨æ—¶è¦å°å¿ƒ
mp.dps = 30
# bad
ic(mpf(10.8))

# good
ic(mpf(&#39;10.8&#39;))

# also good
ic(mpf(108)/mpf(10))


# ? ç„¶è€Œ,0.5ã€1.5ã€0.75ã€0.125ç­‰é€šå¸¸ä½œä¸ºè¾“å…¥æ˜¯å®‰å…¨çš„,å› ä¸ºå®ƒä»¬å¯ä»¥ç”¨Pythonæµ®ç‚¹æ•°ç²¾ç¡®åœ°è¡¨ç¤º</code></pre><h4 id="_13-è¾“å‡ºæ ¼å¼åŒ–">1.3 è¾“å‡ºæ ¼å¼åŒ–</h4><pre><code class="language-python"># è®¾ç½® mp.pretty = True å¯ä»¥è¾“å‡ºæ›´å¥½çœ‹çš„ç»“æœ

mp.pretty = True
mpf(0.6)
# output: 0.599999999999999977795539507497

mp.pretty = False
mpf(0.6)
# output: mpf(&#39;0.599999999999999977795539507496869&#39;)</code></pre><h4 id="_14-è¾“å‡ºçš„å°æ•°ç‚¹ä½æ•°">1.4 è¾“å‡ºçš„å°æ•°ç‚¹ä½æ•°</h4><p>use mpmath.nstr() and mpmath.nprint() å‡½æ•°.é»˜è®¤æƒ…å†µä¸‹æ‰“å°æ•°å­—çš„ä½æ•°ç”±å·¥ä½œç²¾åº¦å†³å®š.è¦æŒ‡å®šè¦æ˜¾ç¤ºçš„ä½æ•°,è€Œä¸æ”¹å˜å·¥ä½œç²¾åº¦,</p><pre><code class="language-python">a=mpf(1)/6.0

mp.nstr(a, 5)
# output: &#39;0.16667&#39;

mp.nprint(a, 10)
# output: &#39;0.1666666667&#39;</code></pre><h3 id="_2-basic-features">2. BASIC FEATURES</h3><p>mpmathä¸­çš„é«˜çº§ä»£ç æ˜¯ä½œä¸º&rdquo;ä¸Šä¸‹æ–‡å¯¹è±¡&rdquo;ä¸Šçš„æ–¹æ³•å®ç°çš„.ä¸Šä¸‹æ–‡å®ç°ç®—æœ¯ã€ç±»å‹è½¬æ¢å’Œå…¶ä»–åŸºæœ¬æ“ä½œ.ä¸Šä¸‹æ–‡è¿˜ä¿å­˜è¯¸å¦‚ç²¾åº¦ä¹‹ç±»çš„è®¾ç½®,å¹¶å­˜å‚¨ç¼“å­˜æ•°æ®.æä¾›äº†ä¸€äº›ä¸åŒçš„ä¸Šä¸‹æ–‡(å…·æœ‰åŸºæœ¬å…¼å®¹çš„æ¥å£),ä»¥ä¾¿é«˜çº§ç®—æ³•å¯ä»¥ä¸åº•å±‚ç®—æ³•çš„ä¸åŒå®ç°ä¸€èµ·ä½¿ç”¨,ä»è€Œå…è®¸ä¸åŒçš„ç‰¹æ€§å’Œé€Ÿåº¦-ç²¾åº¦æƒè¡¡.</p><p>ç›®å‰,mpmathæä¾›äº†ä»¥ä¸‹ä¸Šä¸‹æ–‡:</p><ul><li>Arbitrary-precision arithmetic (mp)</li><li>A faster Cython-based version of mp (used by default in Sage, and currently only available there)</li><li>Arbitrary-precision interval arithmetic (iv)</li><li><strong>Double-precision arithmetic using Python&rsquo;s builtin float and complex types (fp)</strong></li></ul><h4 id="_21-arbitrary-precision-floating-point-mp">2.1  Arbitrary-precision floating-point (mp)</h4><p>mpæ”¯æŒä»»æ„ç²¾åº¦,å¹¶ä¸”æ”¯æŒç»å¤§å¤šæ•°å‡½æ•°,ç»è¿‡å……åˆ†æµ‹è¯•,å……åˆ†ä¼˜åŒ–.</p><h4 id="_22-arbitrary-precision-interval-arithmetic-iv">2.2 Arbitrary-precision interval arithmetic (iv)</h4><p>ivæ”¯æŒåŒºé—´è¿ç®—,ä½†æ˜¯åœ¨ç‰ˆæœ¬1.3.0ä¸­,ivè¿˜å¤„äºæµ‹è¯•é˜¶æ®µ,åªæ”¯æŒå°‘éƒ¨åˆ†å‡½æ•°.</p><h4 id="_23-double-precision-arithmetic-using-pythonrsquos-builtin-float-and-complex-types-fp">2.3 Double-precision arithmetic using Python&rsquo;s builtin float and complex types (fp)</h4><p>å°½ç®¡mpmathé€šå¸¸æ˜¯ä¸ºä»»æ„ç²¾åº¦ç®—æœ¯è®¾è®¡çš„,ä½†è®¸å¤šé«˜çº§ç®—æ³•å¯ä»¥å¾ˆå¥½åœ°å¤„ç†æ™®é€šçš„Pythonæµ®ç‚¹æ•°å’Œå¤æ•°,å®ƒä»¬ä½¿ç”¨ç¡¬ä»¶åŒç²¾åº¦(åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸Š,è¿™ç›¸å½“äº53ä½ç²¾åº¦). mp objectçš„å‡½æ•°ä¼šæŠŠè¾“å…¥è½¬æ¢ä¸ºmpmath numbers type. fp objectåˆ™æ˜¯å°†è¾“å…¥è½¬æ¢ä¸ºPythonçš„æµ®ç‚¹æ•°å’Œå¤æ•°ç±»å‹.<strong>å½“éœ€è¦è¿›è¡Œå¤§é‡çš„å‡½æ•°æ±‚å€¼(æ•°å€¼ç§¯åˆ†ã€ç»˜å›¾ç­‰),å¹¶ä¸”å½“fpç®—æ³•æä¾›è¶³å¤Ÿçš„ç²¾åº¦æ—¶,è¿™å¯ä»¥å¤§å¤§æé«˜mpç®—æ³•çš„é€Ÿåº¦.</strong></p><p>åŸºäºä»¥ä¸Šä¼˜åŠ¿,å¯ä»¥ä½¿ç”¨fp.func è¿›è¡Œè¿ç®—.(<strong>ä½¿ç”¨func æˆ–mp.func éƒ½æ˜¯mpçš„å‡½æ•°</strong>)</p><p><strong>ä½¿ç”¨fpç®—æ³•è®¡ç®—çš„ç»“æœå¯èƒ½æ¯”ä½¿ç”¨ç­‰æ•ˆç²¾åº¦(mp)çš„mpè®¡ç®—çš„ç»“æœä¸é‚£ä¹ˆç²¾ç¡®</strong>.(mp.prec = 53),å› ä¸ºåè€…ç»å¸¸ä½¿ç”¨æ›´é«˜çš„å†…éƒ¨ç²¾åº¦.å…¶ç²¾åº¦é«˜åº¦ä¾èµ–äº:</p><ul><li>for some functions, fp almost always gives 14-15 correct digits; for others, results can be accurate to only 2-3 digits or even completely wrong.</li><li>The recommended use for fp is therefore to speed up large-scale computations where accuracy can be verified in advance on a subset of the input set, or where results can be verified afterwards.</li></ul><pre><code class="language-python">fp.pretty=True
u=fp.rand()

print(u)
# 0.6473090346719316

print(type(u))
# &lt;class &#39;float&#39;&gt;

m=fp.matrix([[1,2],[3,4]])**2

print(m)
# [ 7.0  10.0]
# [15.0  22.0]

print(type(m))
# &lt;class &#39;mpmath.matrices.matrices.matrix&#39;&gt;</code></pre><h4 id="_24-åŸºæœ¬å‡½æ•°">2.4 åŸºæœ¬å‡½æ•°</h4><p>fp bject ä¸ºåŸºæœ¬å‡½æ•° åŒ…è£…äº†Pythonçš„mathå’Œcmathæ¨¡å—.æ”¯æŒå®æ•°å’Œå¤æ•°,å¹¶è‡ªåŠ¨ä¸ºå®æ•°è¾“å…¥ç”Ÿæˆå¤æ•°ç»“æœ(æ•°å­¦ä¼šå¼•å‘å¼‚å¸¸)</p><pre><code class="language-python">fp.sqrt(5)
# 2.23606797749979

fp.sqrt(-5)
# 2.23606797749979j

fp.sin(fp.pi/2)
# 1.0

fp.power(-2,0.5)
# (8.659560562354934e-17+1.4142135623730951j)

print(type(fp.power(-2,0.5)))
# &lt;class &#39;complex&#39;&gt;</code></pre><h3 id="_24-å®ç”¨å‡½æ•°">2.4 å®ç”¨å‡½æ•°</h3><h4 id="_241-converion-and-printing">2.4.1 converion and printing</h4><pre><code class="language-python"># mp.mpmathify(x,strings=True)
# èƒ½å¤Ÿå°†xè½¬æ¢ä¸ºmpf or mpcç±»å‹

fp.dps=15
fp.pretty = True

mpmathify(3.5)
# mpf(&#39;3.5&#39;)

mpmathify(3+4j)
#mpc(real=&#39;3.0&#39;, imag=&#39;4.0&#39;)

mpmathify(&#39;3.5&#39;)
# mpf(&#39;3.5&#39;)

# mpmath.nstr(x,n=6,**kwargs)
# å°†mpfæˆ–mpcè½¬æ¢ä¸ºå…·æœ‰nä½æœ‰æ•ˆæ•°å­—çš„åè¿›åˆ¶å­—ç¬¦ä¸²
# nprint(x,n=6) ä¼šç›´æ¥æ‰“å°nstr()çš„å­—ç¬¦ä¸²ç»“æœ

f=mp.mpf(1.53)
print(f)
nprint(f,n=12)
# 1.530000000000000026645352591
# 1.53</code></pre><h4 id="_242-ç®—æœ¯è¿ç®—">2.4.2 ç®—æœ¯è¿ç®—</h4><p>åŒ…æ‹¬åŠ å‡ä¹˜é™¤ã€å–æ¨¡ã€å¹‚è¿ç®—ç­‰.</p><pre><code class="language-python"># ! mpmath.fadd(x, y,**kwargs)
# å®ç°x+y,è¿”å›æµ®ç‚¹æ•°ç»“æœ.å¯ä»¥è‡ªå®šä¹‰ç²¾åº¦å’Œèˆå…¥æ¨¡å¼.é»˜è®¤ç²¾åº¦æ˜¯å·¥ä½œç²¾åº¦,
# kwargsä¸­å¯ä»¥è®¾ç½®ç²¾åº¦å’Œèˆå…¥æ¨¡å¼.:
# + prec,dps(int)--è®¾ç½®ç²¾åº¦; exact=True--ä¸å››èˆäº”å…¥.
# + rounding(str)--è®¾ç½®èˆå…¥æ¨¡å¼,å¯é€‰&#39;n&#39;(default)--nearst,&#39;f&#39;--floor,&#39;c&#39;-ceiling,&#39;d&#39;-down,&#39;u&#39;-up.
x=mp.rand()
y=mp.rand()
ic(x,y)
nprint(mp.fadd(x,y,dps=5,rounding=&#39;u&#39;))
# ic| x: mpf(&#39;0.936352251244129142275205120579475&#39;)
#     y: mpf(&#39;0.118268786487759443295747691143063&#39;)
# 1.05462

# ! mpmath.fsub(x, y,**kwargs)
# å®ç°x-y,è¿”å›æµ®ç‚¹æ•°ç»“æœ.
x=mp.mpf(1.53)
y=mp.mpf(2.87)
print(x-y)
# -1.34000000000000007993605777301
print(mp.fsub(x,y))
# -1.34000000000000007993605777301

# ! mpmath.fneg(x,**kwargs)
# å®ç°-x,è¿”å›æµ®ç‚¹æ•°ç»“æœ.
print(mp.fneg(mp.mpf(2.5)))
# -2.5

# ! mpmath.fmul(x, y,**kwargs)
# å®ç°x*y,è¿”å›æµ®ç‚¹æ•°ç»“æœ.
x=mp.mpf(2.5)
y=mp.mpf(3.14)
print(x*y)
# 7.85000000000000031086244689504
print(mp.fmul(x,y))
# 7.85000000000000031086244689504

a=mp.mpc(2,5)
b=mp.mpc(3,4)
print(a*b)
# (-14.0 + 23.0j)
print(mp.fmul(a,b))
# (-14.0 + 23.0j)

# ! mpmath.fdiv(x, y,**kwargs)
# å®ç°x/y,è¿”å›æµ®ç‚¹æ•°ç»“æœ.
x=mp.mpf(3)
y=mp.mpf(2)
print(x/y)
# 1.5
print(mp.fdiv(x,y))
# 1.5


# ! mpmath.fmod(x,y)
# Converts ğ‘¦ and ğ‘§ to mpmath numbers and returns ğ‘¦ mod ğ‘§. 
# For mpmath numbers, this is equivalent to x % y.
mp.fmod(100,3)
# mpf(&#39;1.0&#39;)
print(100%3)
# 1

# ! mpmath.fsum(terms,absolute=False,squared=False,**kwargs)
# è®¡ç®—ä¸€ä¸ªarray-likeçš„termsçš„å’Œ.å¦‚æœlen(terms)&gt;2,è¿™ä¼šæ¯”pythonå†…ç½®çš„sumå‡½æ•°å¿«å¾ˆå¤š.
# + absolute=True--è¿”å›æ¯ä¸€é¡¹çš„ç»å¯¹å€¼çš„æ€»å’Œ.
# + squared=True--è¿”å›æ¯ä¸€é¡¹çš„å¹³æ–¹çš„æ€»å’Œ.
mp.fsum([1,2,3,4,5])
# mpf(&#39;15.0&#39;)

mp.fsum([1,-2,3,-4,5],absolute=True)
# mpf(&#39;15.0&#39;)
mp.fsum([1,-2,3,-4,5],absolute=False)
# mpf(&#39;3.0&#39;)

mp.fsum([1,2,3,4,5],squared=True)
# mpf(&#39;55.0&#39;)

# ! mpmath.fprod(factors)
# è®¡ç®—ä¸€ä¸ªarray-like objectçš„æ¯ä¸€é¡¹çš„è¿ç»­ä¹˜ç§¯.
# å¦‚: fprod([1,2,3,4,5])=1*2*3*4*5=120
mp.fprod([1,2,3,4,5])
# mpf(&#39;120.0&#39;)

# ! mpmath.fdot(A, B=None, conjugate=False)
# æ¥å—ä¸¤ä¸ªarray-like object Aå’ŒB,è®¡ç®—A,Bçš„ç‚¹ç§¯. sum(A[i]*B[i]) ,i=0,...,len(A)-1.
# if conjugate is True, B is conjugated before multiplication.  
# å¦‚: fdot([1,2,3],[4,5,6])=1*4+2*5+3*6=32
mp.fdot([1,2,3],[4,5,6])
# mpf(&#39;32.0&#39;)</code></pre><h4 id="_243-å¤æ•°ç›¸å…³å‡½æ•°">2.4.3 å¤æ•°ç›¸å…³å‡½æ•°</h4><p>fabs(x) :è¿”å›å¤æ•°xçš„æ¨¡æˆ–è€…å®æ•°xçš„ç»å¯¹å€¼.
arg(x):è¿”å›xçš„ç›¸ä½è§’(ä»¥å¼§åº¦è¡¨ç¤º).-pi&lt; arg(x) &lt; pi .
sign(x) :è¿”å›xçš„ç¬¦å·,sign(x)=x/|x|.
re(x) :è¿”å›xçš„å®éƒ¨.
im(x) :è¿”å›xçš„è™šéƒ¨.
conj(x) :è¿”å›xçš„å…±è½­å¤æ•°$\bar{x}$
polar(x) :å°†å¤æ•°xåˆ†è§£ä¸ºæåæ ‡å½¢å¼(r,Î¸)$x=r\exp(i\theta)$
rect(r,Î¸) :å°†æåæ ‡å½¢å¼(r,Î¸)è½¬æ¢ä¸ºå¤æ•°å½¢å¼$x=r(\cos\theta+i\sin\theta)$</p><pre><code class="language-python">&gt;&gt;&gt; from mpmath import *
&gt;&gt;&gt; mp.dps = 15; mp.pretty = True
&gt;&gt;&gt; chop(rect(2, pi))
-2.0
&gt;&gt;&gt; rect(sqrt(2), -pi/4)
(1.0 - 1.0j)</code></pre><h4 id="_244-å¤„ç†æ•´æ•°å’Œå°æ•°">2.4.4 å¤„ç†æ•´æ•°å’Œå°æ•°</h4><p>floor(x) : å‘ä¸‹å–æ•´æ•°
ceil(x) : å‘ä¸Šå–æ•´æ•°
nint(x) : å››èˆäº”å…¥å–æ•´æ•°
frac(x) : è¿”å›xçš„å°æ•°éƒ¨åˆ†,frac(x)=x-floor(x)</p><pre><code class="language-python">&gt;&gt;&gt; from mpmath import *
&gt;&gt;&gt; mp.pretty = False
&gt;&gt;&gt; frac(1.25)
mpf(&#39;0.25&#39;)
&gt;&gt;&gt; frac(3)
mpf(&#39;0.0&#39;)
&gt;&gt;&gt; frac(-1.25)
mpf(&#39;0.75&#39;)</code></pre><h4 id="_245-å…¬å·®å’Œè¿‘ä¼¼æ¯”è¾ƒ">2.4.5 å…¬å·®å’Œè¿‘ä¼¼æ¯”è¾ƒ</h4><p>chop(x, tol=None) : å»é™¤å°çš„å®éƒ¨æˆ–è€…è™šéƒ¨,æˆ–è€…å°†æ¥è¿‘äº0çš„è½¬æ¢ä¸ºç²¾ç¡®çš„0,xå¯ä»¥æ˜¯æ•°å­—æˆ–è€…iterable.<strong>The tolerance defaults to 100*eps.</strong>
almosteq(s, t, rel_eps=None, abs_eps=None) : åˆ¤æ–­s-tæ˜¯å¦å°äºç»™å®šçš„è¯¯å·®,rel_epså’Œabs_epsåˆ†åˆ«æ˜¯ç›¸å¯¹è¯¯å·®å’Œç»å¯¹è¯¯å·®.ç»å¯¹è¯¯å·®=|s-t|,ç›¸å¯¹è¯¯å·®=|s-t|/max(|s|,|t|).</p><h4 id="_246-æ•°ç»„ç”Ÿæˆ">2.4.6 æ•°ç»„ç”Ÿæˆ</h4><p>fraction(p,q) ;ç»™å®šä¸¤ä¸ªæ•´æ•°på’Œq,è¿”å›åˆ†æ•°p/q.<strong>æ¯”å…¶ä»–çš„ç²¾åº¦æ›´å¥½</strong></p><pre><code class="language-python">&gt;&gt;&gt; from mpmath import *
&gt;&gt;&gt; mp.dps = 15
&gt;&gt;&gt; a = fraction(1,100)
&gt;&gt;&gt; b = mpf(1)/100
&gt;&gt;&gt; print(a); print(b)
0.01
0.01
&gt;&gt;&gt; mp.dps = 30
&gt;&gt;&gt; print(a); print(b) # a will be accurate
0.01
0.0100000000000000002081668171172
&gt;&gt;&gt; mp.dps = 15</code></pre><p>rand() : éšæœºç”Ÿæˆä¸€ä¸ªmpféšæœºæ•°,èŒƒå›´åœ¨[0,1)ä¹‹é—´.
arrange(<em>args):è¿”å›mpfæ•°ç»„åºåˆ—. **æœ€åä¸€ä¸ªæ•°ä¸æ˜¯b</em></p><ul><li>arrange(b):[0,1,2,...,x]</li><li>arrange(a,b):[a,a+1,a+2,...,x]</li></ul><blockquote><p>$b-1 \leq x &lt; b$</p></blockquote><ul><li>arrange(a,b,h):[a,a+h,a+2h,...,x]</li></ul><blockquote><p>$b-h \leq x &lt; b$</p></blockquote><pre><code class="language-python">&gt;&gt;&gt; from mpmath import *
&gt;&gt;&gt; mp.dps = 15; mp.pretty = False
&gt;&gt;&gt; arange(4)
[mpf(&#39;0.0&#39;), mpf(&#39;1.0&#39;), mpf(&#39;2.0&#39;), mpf(&#39;3.0&#39;)]
&gt;&gt;&gt; arange(1, 2, 0.25)
[mpf(&#39;1.0&#39;), mpf(&#39;1.25&#39;), mpf(&#39;1.5&#39;), mpf(&#39;1.75&#39;)]
&gt;&gt;&gt; arange(1, -1, -0.75)
[mpf(&#39;1.0&#39;), mpf(&#39;0.25&#39;), mpf(&#39;-0.5&#39;)]</code></pre><p>linspace(start,end,num) :è¿”å›æµ®ç‚¹æ•°æ•°ç»„,ä»startåˆ°endå‡åŒ€åˆ†æˆnumä¸ªå…ƒç´ .é»˜è®¤åŒ…æ‹¬end.å…ƒç´ ä¹‹é—´çš„é—´éš”$\Delta=(end-start)/(num-1)$</p><pre><code class="language-python">&gt;&gt;&gt; from mpmath import *
&gt;&gt;&gt; mp.dps = 15; mp.pretty = False
&gt;&gt;&gt; linspace(1, 4, 4)
[mpf(&#39;1.0&#39;), mpf(&#39;2.0&#39;), mpf(&#39;3.0&#39;), mpf(&#39;4.0&#39;)]</code></pre><p>ä½¿ç”¨ endpoint=False å¯ä»¥æ’é™¤end.æ­¤æ—¶: å…ƒç´ ä¹‹é—´çš„é—´éš”$\Delta=(end-start)/(num+1)$</p><pre><code class="language-python">&gt;&gt;&gt; linspace(1, 4, 4, endpoint=False)
[mpf(&#39;1.0&#39;), mpf(&#39;1.75&#39;), mpf(&#39;2.5&#39;), mpf(&#39;3.25&#39;)]</code></pre><h3 id="_25-plottingå‡½æ•°">2.5 plottingå‡½æ•°</h3><p>plot([cos, sin], [-4, 4]): ç»˜åˆ¶coså’Œsinå‡½æ•°çš„å›¾åƒ,xè½´èŒƒå›´ä¸º[-4,4].</p><figure><img src="media/2026433-20240702104746479-1471661050@1214130346.png" alt="img" /></figure><h4 id="_251-2d-plotting">2.5.1 2D plotting</h4><blockquote><p>This function requires matplotlib (pylab).</p></blockquote><p>plot(f, xlim=[- 5, 5], ylim=None, points=200, file=None, dpi=None, singularities=[], axes=None)</p><p>ç»™å®šä¸€ä¸ªå‡½æ•°f(x),æˆ–è€…ä¸€ä¸ªå‡½æ•°åºåˆ—[f1(x),f2(x),...,fn(x)],å¹¶æŒ‡å®šxå‘¨èŒƒå›´xlim=[start,end],ç»˜åˆ¶2Då›¾åƒ</p><p>ä½¿ç”¨singularitieså¯ä»¥åœ¨æŒ‡å®šç‚¹,æ¶ˆé™¤æ•°å€¼å¥‡å¼‚æˆ–è€…æ— ç©·å¤§å€¼.ä¾‹å¦‚tanå‡½æ•°</p><pre><code class="language-python"># ä½¿ç”¨singularitiesç»˜åˆ¶tanå‡½æ•°
from mpmath import *
plot(tan, [-2*pi, 2*pi],singularities=[-pi/2, pi/2,-1.5*pi,1.5*pi],points=10000)</code></pre><figure><img src="media/2026433-20240702110832455-1097712733@-138621580.png" alt="img" /></figure><pre><code class="language-python"># ä¸ä½¿ç”¨singularitiesç»˜åˆ¶tanå‡½æ•°
from mpmath import *
plot(tan, [-2*pi, 2*pi],points=10000)</code></pre><figure><img src="media/2026433-20240702111018551-1498801193@1850693518.png" alt="img" /></figure><p>ä¾‹å¦‚:</p><pre><code class="language-python">plot(lambda x: exp(x)*li(x), [1, 4])
plot([fresnels, fresnelc], [-4, 4])
plot([sqrt, cbrt], [-4, 4])
plot(lambda t: zeta(0.5+t*j), [-20, 20])
plot([floor, ceil, abs, sign], [-5, 5])</code></pre><figure><img src="media/2026433-20240702105540939-168924808@-846364051.png" alt="img" /></figure><figure><img src="media/2026433-20240702105716084-707872566@11539191.png" alt="img" /></figure><figure><img src="media/2026433-20240702105723086-1052394950@-280211235.png" alt="img" /></figure><figure><img src="media/2026433-20240702105752848-83980325@-769623127.png" alt="img" /></figure><figure><img src="media/2026433-20240702105800420-1891403531@629760720.png" alt="img" /></figure><h2 id="_3-é«˜çº§ç‰¹æ€§">3. é«˜çº§ç‰¹æ€§</h2><h3 id="_31-çŸ©é˜µ">3.1 çŸ©é˜µ</h3><h4 id="_311-åˆ›å»ºçŸ©é˜µ">3.1.1 åˆ›å»ºçŸ©é˜µ</h4><p>mpmathä¸­çš„çŸ©é˜µæ˜¯ä½¿ç”¨å­—å…¸å®ç°çš„.åªå­˜å‚¨éé›¶å€¼,å› æ­¤è¡¨ç¤ºç¨€ç–çŸ©é˜µçš„æˆæœ¬å¾ˆä½.</p><p>æœ€ç®€å•çš„çŸ©é˜µåˆ›å»ºæ–¹æ³•æ˜¯ä½¿ç”¨matrix()å‡½æ•°,æŒ‡å®šçŸ©é˜µç»´åº¦,å¯ä»¥å¾—åˆ°ç©ºçŸ©é˜µ;<strong>ä¹Ÿå¯ä»¥åŸºäºåˆ—è¡¨åˆ›å»ºçŸ©é˜µ,è¿™åœ¨æ ¹æ®å·²çŸ¥numpyæ•°ç»„åˆ›å»ºçŸ©é˜µæ—¶å¾ˆæœ‰ç”¨.</strong></p><pre><code class="language-python"># åˆ›å»ºç©ºçŸ©é˜µ
&gt;&gt;&gt; from mpmath import *
&gt;&gt;&gt; mp.dps = 15; mp.pretty = False
&gt;&gt;&gt; matrix(2)
matrix(
[[&#39;0.0&#39;, &#39;0.0&#39;],
[&#39;0.0&#39;, &#39;0.0&#39;]])
&gt;&gt;&gt; matrix(2, 3)
matrix(
[[&#39;0.0&#39;, &#39;0.0&#39;, &#39;0.0&#39;],
[&#39;0.0&#39;, &#39;0.0&#39;, &#39;0.0&#39;]])
# åŸºäºåˆ—è¡¨åˆ›å»ºçŸ©é˜µ
&gt;&gt;&gt; matrix([[1, 2], [3, 4]])
matrix(
[[&#39;1.0&#39;, &#39;2.0&#39;],
[&#39;3.0&#39;, &#39;4.0&#39;]])
&gt;&gt;&gt; mp.matrix(np.array([[1,2,5],[3,4,9]]))
matrix(
[[&#39;1.0&#39;, &#39;2.0&#39;, &#39;5.0&#39;],
 [&#39;3.0&#39;, &#39;4.0&#39;, &#39;9.0&#39;]])
&gt;&gt;&gt;mp.matrix(np.array([1,2,5,6]))
matrix(
[[&#39;1.0&#39;],
 [&#39;2.0&#39;],
 [&#39;5.0&#39;],
 [&#39;6.0&#39;]])
&gt;&gt;&gt;mp.matrix(np.array([[1,2,5,6]]))
matrix(
[[&#39;1.0&#39;, &#39;2.0&#39;, &#39;5.0&#39;, &#39;6.0&#39;]])</code></pre><p>è®¿é—®matrix objectçš„rows,colså±æ€§å¯ä»¥å¾—åˆ°çŸ©é˜µçš„è¡Œæ•°,åˆ—æ•°.<strong>ç›´æ¥ä¿®æ”¹rows,colså¯ä»¥æ”¹å˜çŸ©é˜µçš„ç»´åº¦.(æ–°å¢çš„å…ƒç´ ä¸º0,åˆ é™¤çš„å…ƒç´ ä¼šä¸¢å¤±)</strong></p><pre><code class="language-python">&gt;&gt;&gt; A = matrix(3, 2)
&gt;&gt;&gt; A
matrix(
[[&#39;0.0&#39;, &#39;0.0&#39;],
[&#39;0.0&#39;, &#39;0.0&#39;],
[&#39;0.0&#39;, &#39;0.0&#39;]])
&gt;&gt;&gt; A.rows
3
&gt;&gt;&gt; A.cols
2
&gt;&gt;&gt; A.rows = 2
&gt;&gt;&gt; A
matrix(
[[&#39;0.0&#39;, &#39;0.0&#39;],
[&#39;0.0&#39;, &#39;0.0&#39;]])</code></pre><p>ç´¢å¼•çŸ©é˜µå…ƒç´ çš„è¯­æ³•ä¸º:matrix[i,j],iè¡¨ç¤ºè¡Œ,jè¡¨ç¤ºåˆ—.</p><pre><code class="language-python">&gt;&gt;&gt; A = matrix(2)
&gt;&gt;&gt; A[1,1] = 1 + 1j
&gt;&gt;&gt; print(A)
[0.0 0.0]
[0.0 (1.0 + 1.0j)]</code></pre><ul><li>é«˜çº§æ–¹æ³•</li></ul><p>zeros(rows, cols) : åˆ›å»ºrowsè¡Œcolsåˆ—çš„é›¶çŸ©é˜µ
ones(rows, cols) : åˆ›å»ºrowsè¡Œcolsåˆ—çš„å•ä½çŸ©é˜µ
eye(rows, cols) : åˆ›å»ºrowsè¡Œcolsåˆ—çš„å•ä½çŸ©é˜µ
randmatrix(rows, cols) : åˆ›å»ºrowsè¡Œcolsåˆ—çš„éšæœºçŸ©é˜µ</p><h4 id="_312-å‘é‡">3.1.2 å‘é‡</h4><p>å‘é‡ä¹Ÿå¯ä»¥ä½¿ç”¨matrixè¡¨ç¤º(rows=1 or cols=1),è¡Œ,åˆ—å‘é‡çš„åˆ›å»ºæ–¹æ³•:</p><pre><code class="language-python"># åˆ›å»ºåˆ—å‘é‡
&gt;&gt;&gt; from mpmath import *
&gt;&gt;&gt; a=matrix([1,2,3])
&gt;&gt;&gt; a
matrix(
[[&#39;1.0&#39;],
 [&#39;2.0&#39;],
 [&#39;3.0&#39;]])
&gt;&gt;&gt; a.rows
3
&gt;&gt;&gt; a.cols
1
# åˆ›å»ºè¡Œå‘é‡
&gt;&gt;&gt; b=matrix([[1,2,3]])
&gt;&gt;&gt; b
matrix(
[[&#39;1.0&#39;, &#39;2.0&#39;, &#39;3.0&#39;]])
&gt;&gt;&gt; b.rows
1
&gt;&gt;&gt; b.cols
3</code></pre><h4 id="_313-çŸ©é˜µå¤åˆ¶">3.1.3 çŸ©é˜µå¤åˆ¶</h4><ul><li>ç›´æ¥æ‰“å°çŸ©é˜µ,æ§åˆ¶æœ‰æ•ˆä½æ•°:</li></ul><pre><code class="language-python">&gt;&gt;&gt; print(randmatrix(3))
[ 0.782963853573023 0.802057689719883 0.427895717335467]
[0.0541876859348597 0.708243266653103 0.615134039977379]
[ 0.856151514955773 0.544759264818486 0.686210904770947]
&gt;&gt;&gt; nprint(randmatrix(5), 3)
[2.07e-1 1.66e-1 5.06e-1 1.89e-1 8.29e-1]
[6.62e-1 6.55e-1 4.47e-1 4.82e-1 2.06e-2]
[4.33e-1 7.75e-1 6.93e-2 2.86e-1 5.71e-1]
[1.01e-1 2.53e-1 6.13e-1 3.32e-1 2.59e-1]
[1.56e-1 7.27e-2 6.05e-1 6.67e-2 2.79e-1]</code></pre><p>ç”±äºmatrix objectå±äºmutable,å› æ­¤å¯ä»¥ç›´æ¥ä¿®æ”¹å…ƒç´ çš„å€¼,æˆ–è€…ä½¿ç”¨copy()æ–¹æ³•å¤åˆ¶çŸ©é˜µ.<strong>æ¶‰åŠåˆ°æµ…æ‹·è´,æ·±æ‹·è´,èµ‹å€¼çš„æ¦‚å¿µ,å¯ä»¥å‚è€ƒpythonçš„ç›¸å…³çŸ¥è¯†.</strong></p><pre><code class="language-python"># æ‹·è´çŸ©é˜µ
&gt;&gt;&gt; a=matrix([[1,2],[3,4]])
&gt;&gt;&gt; a
matrix(
[[&#39;1.0&#39;, &#39;2.0&#39;],
 [&#39;3.0&#39;, &#39;4.0&#39;]])
&gt;&gt;&gt; b=a.copy()
&gt;&gt;&gt; b
matrix(
[[&#39;1.0&#39;, &#39;2.0&#39;],
 [&#39;3.0&#39;, &#39;4.0&#39;]])
&gt;&gt;&gt; a[0,0]=0
&gt;&gt;&gt; a
matrix(
[[&#39;0.0&#39;, &#39;2.0&#39;],
 [&#39;3.0&#39;, &#39;4.0&#39;]])
&gt;&gt;&gt; b
matrix(
[[&#39;1.0&#39;, &#39;2.0&#39;],
 [&#39;3.0&#39;, &#39;4.0&#39;]])
# ç›´æ¥èµ‹å€¼
&gt;&gt;&gt; id(a)
2441463350224
&gt;&gt;&gt; b=a
&gt;&gt;&gt; id(b)
2441463350224   # ä¸¤ä¸ªå˜é‡æŒ‡å‘åŒä¸€å—å†…å­˜ç©ºé—´
&gt;&gt;&gt; b
matrix(
[[&#39;1.0&#39;, &#39;2.0&#39;],
 [&#39;3.0&#39;, &#39;4.0&#39;]])
&gt;&gt;&gt; b[1,1]=100
&gt;&gt;&gt; a
matrix(
[[&#39;1.0&#39;, &#39;2.0&#39;],
 [&#39;3.0&#39;, &#39;100.0&#39;]])
&gt;&gt;&gt; b
matrix(
[[&#39;1.0&#39;, &#39;2.0&#39;],
 [&#39;3.0&#39;, &#39;100.0&#39;]])</code></pre><p>matrix objectå¯ä»¥ä½¿ç”¨ tolist()æ–¹æ³•è½¬æ¢ä¸ºåµŒå¥—åˆ—è¡¨</p><pre><code class="language-python">&gt;&gt;&gt; a
matrix(
[[&#39;0.0&#39;, &#39;2.0&#39;],
 [&#39;3.0&#39;, &#39;100.0&#39;]])
&gt;&gt;&gt; a.tolist()
[[mpf(&#39;0.0&#39;), mpf(&#39;2.0&#39;)], [mpf(&#39;3.0&#39;), mpf(&#39;100.0&#39;)]]
&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; np.array(a.tolist())
array([[mpf(&#39;0.0&#39;), mpf(&#39;2.0&#39;)],
       [mpf(&#39;3.0&#39;), mpf(&#39;100.0&#39;)]], dtype=object)
&gt;&gt;&gt; np.array(a.tolist())[1,1]
mpf(&#39;100.0&#39;)</code></pre><h4 id="_314-çŸ©é˜µè¿ç®—">3.1.4 çŸ©é˜µè¿ç®—</h4><ul><li>çŸ©é˜µå’Œå®æ•°ä¹‹é—´çš„åŠ å‡ä¹˜é™¤,æ¬¡å¹‚è¿ç®—(A^n)</li></ul><pre><code class="language-python">&gt;&gt;&gt; A = matrix([[1, 2], [3, 4]])
&gt;&gt;&gt; B = matrix([[-2, 4], [5, 9]])
# çŸ©é˜µç›¸åŠ 
&gt;&gt;&gt; A + B
matrix(
[[&#39;-1.0&#39;, &#39;6.0&#39;],
[&#39;8.0&#39;, &#39;13.0&#39;]])
&gt;&gt;&gt; A - B
matrix(
[[&#39;3.0&#39;, &#39;-2.0&#39;],
[&#39;-2.0&#39;, &#39;-5.0&#39;]])
# ä¸¾ç€ç›¸åŠ éœ€è¦æ³¨æ„ç»´åº¦çš„ä¸€è‡´æ€§
&gt;&gt;&gt; A + ones(3)
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
File &quot;...&quot;, line 238, in __add__
raise ValueError(&#39;incompatible dimensions for addition&#39;)
ValueError: incompatible dimensions for addition
# çŸ©é˜µä¹˜æ³•
&gt;&gt;&gt; A * 2
matrix(
[[&#39;2.0&#39;, &#39;4.0&#39;],
[&#39;6.0&#39;, &#39;8.0&#39;]])
&gt;&gt;&gt; A / 4
matrix(
[[&#39;0.25&#39;, &#39;0.5&#39;],
[&#39;0.75&#39;, &#39;1.0&#39;]])
&gt;&gt;&gt; A - 1
matrix(
[[&#39;0.0&#39;, &#39;1.0&#39;],
[&#39;2.0&#39;, &#39;3.0&#39;]])
</code></pre><ul><li>çŸ©é˜µä¹‹é—´çš„åŠ å‡ä¹˜é™¤è¿ç®—,ç»´åº¦å¿…é¡»ä¸€è‡´,å¦åˆ™ä¼šæŠ¥é”™.</li></ul><pre><code class="language-python">&gt;&gt;&gt; A * B
matrix(
[[&#39;8.0&#39;, &#39;22.0&#39;],
[&#39;14.0&#39;, &#39;48.0&#39;]])
# è¡Œå‘é‡*åˆ—å‘é‡
&gt;&gt;&gt; matrix([[1, 2, 3]]) * matrix([[-6], [7], [-2]])
matrix(
[[&#39;2.0&#39;]])
&gt;&gt;&gt; A**2
matrix(
[[&#39;7.0&#39;, &#39;10.0&#39;],
[&#39;15.0&#39;, &#39;22.0&#39;]])</code></pre><ul><li>çŸ©é˜µæ±‚é€†:A**(-1)</li></ul><pre><code class="language-python">&gt;&gt;&gt; A
matrix(
[[&#39;1.0&#39;, &#39;2.0&#39;],
 [&#39;3.0&#39;, &#39;4.0&#39;]])
&gt;&gt;&gt; A**-1
matrix(
[[&#39;-2.0&#39;, &#39;1.0&#39;],
 [&#39;1.5&#39;, &#39;-0.5&#39;]])
&gt;&gt;&gt; A*A**-1
matrix(
[[&#39;1.0&#39;, &#39;1.0842021724855e-19&#39;],
 [&#39;-2.16840434497101e-19&#39;, &#39;1.0&#39;]])</code></pre><ul><li>çŸ©é˜µè½¬ç½®:A.T</li></ul><pre><code class="language-python">&gt;&gt;&gt; A
matrix(
[[&#39;1.0&#39;, &#39;2.0&#39;],
 [&#39;3.0&#39;, &#39;4.0&#39;]])
&gt;&gt;&gt; A.T
matrix(
[[&#39;1.0&#39;, &#39;3.0&#39;],
 [&#39;2.0&#39;, &#39;4.0&#39;]])</code></pre><ul><li>çŸ©é˜µè¡Œåˆ—å¼</li></ul><p>å¯¹äºä¸€ä¸ªæ–¹é˜µ,mpmath.det(A)å¯ä»¥è®¡ç®—å…¶è¡Œåˆ—å¼.</p><pre><code class="language-python">&gt;&gt;&gt; from mpmath import mp
&gt;&gt;&gt; A = mp.matrix([[7, 2], [1.5, 3]])
&gt;&gt;&gt; print(mp.det(A))
18.0</code></pre><ul><li>è®¡ç®—èŒƒæ•°</li></ul><p>çŸ©é˜µå’Œå‘é‡æ— æ³•ç›´æ¥æ¯”è¾ƒå¤§å°,ä½†å¯ä»¥ç”¨èŒƒæ•°(norm)æ¥è¡¡é‡çŸ©é˜µå’Œå‘é‡çš„å¤§å°.</p><blockquote><p>èŒƒæ•°:å°†çŸ©é˜µæˆ–å‘é‡æ˜ å°„åˆ°éè´Ÿå®æ•°å€¼,ä½¿å¾—è¯¥å€¼è¡¨ç¤ºçŸ©é˜µæˆ–å‘é‡çš„å¤§å°.</p></blockquote><p>mpmath.norm(x,p=2):ç»™å®šx(iterable),è®¡ç®—xçš„$pèŒƒæ•°=(\sum_{k}|x_k|^p)^{1/p},\quad 1 \leq p \leq \infty$.</p><p>ç‰¹åˆ«çš„:å¦‚æœxä¸æ˜¯iterable,åˆ™è¿”å›absmax(x).</p><p>p=1: ç»å¯¹å€¼èŒƒæ•°,å³$\sum_{k}|x_k|$</p><p>p=2: äºŒèŒƒæ•°(æ ‡å‡†æ¬§å‡ é‡Œå¾—å‘é‡èŒƒæ•°),å³$\sqrt{\sum_{k}|x_k|^2}$</p><p>p=inf: æœ€å¤§èŒƒæ•°,å³$\max{|x_k|}$</p><p>éœ€è¦æ³¨æ„çš„æ˜¯: å¦‚æœxæ˜¯çŸ©é˜µ,ä¸”p=2,åˆ™è¿”å›FrobeniusèŒƒæ•°,å³$\sqrt{\sum_{i,j}|A_{ij}|^2}$. <strong>å¯¹äºç®—å­çŸ©é˜µè§„èŒƒ,ä½¿ç”¨mnorm()ä»£æ›¿</strong></p><pre><code class="language-python">&gt;&gt;&gt; A
matrix(
[[&#39;1.0&#39;, &#39;2.0&#39;],
 [&#39;3.0&#39;, &#39;4.0&#39;]])
&gt;&gt;&gt; 1+4+9+16
30
&gt;&gt;&gt; sqrt(30)
mpf(&#39;5.4772255750516612&#39;)
&gt;&gt;&gt; norm(A,p=2)
mpf(&#39;5.4772255750516612&#39;)</code></pre><p>mpmath.mnorm(A, p=1): è®¡ç®—çŸ©é˜µAçš„çŸ©é˜µ(ç®—å­)p-èŒƒæ•°. 1.3.0ç‰ˆæœ¬æ”¯æŒp=1,inf.</p><p>ç‰¹åˆ«çš„:</p><p>p=1: çŸ©é˜µ(ç®—å­)max column sum èŒƒæ•°,å³$max{\sum_{i} |A_{ij}|}$.</p><p>p=inf: çŸ©é˜µ(ç®—å­)max row sum èŒƒæ•°,å³$max{\sum_{j} |A_{ij}|}$.</p><p>p=&rsquo;f&rsquo;: çŸ©é˜µ(ç®—å­)FrobeniusèŒƒæ•°,ç›¸å½“äºelementwise 2-norm.<strong>FrobeniusèŒƒæ•°æ˜¯è°±èŒƒæ•°çš„è¿‘ä¼¼å€¼</strong>,ä¸”æ»¡è¶³:</p><figure><img src="media/2026433-20240702224632505-690026433@-278125225.png" alt="img" /></figure><blockquote><p>FrobeniusèŒƒæ•°ç¼ºä¹ä¸€äº›èŒƒæ•°åº”æœ‰çš„æ•°å­¦æ€§è´¨</p></blockquote><pre><code class="language-python">&gt;&gt;&gt; from mpmath import *
&gt;&gt;&gt; mp.dps = 15; mp.pretty = False
&gt;&gt;&gt; A = matrix([[1, -1000], [100, 50]])
&gt;&gt;&gt; mnorm(A, 1)
mpf(&#39;1050.0&#39;)
&gt;&gt;&gt; mnorm(A, inf)
mpf(&#39;1001.0&#39;)
&gt;&gt;&gt; mnorm(A, &#39;F&#39;)
mpf(&#39;1006.2310867787777&#39;)
# çŸ©é˜µ(ç®—å­)FrobeniusèŒƒæ•°ä¸elementwise 2-normçš„æ¯”è¾ƒ
&gt;&gt;&gt; A
matrix(
[[&#39;1.0&#39;, &#39;2.0&#39;],
 [&#39;3.0&#39;, &#39;4.0&#39;]])
&gt;&gt;&gt; norm(A,p=2)
mpf(&#39;5.4772255750516612&#39;)
&gt;&gt;&gt; mnorm(A,p=&#39;f&#39;)
mpf(&#39;5.4772255750516612&#39;)</code></pre><p>æœªå®Œå¾…ç»­....2024.07.02</p></main>
    <aside class="margin-area" id="margin-area-right"></aside>
  </body>
</html>
