<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta name="generator" content="Quarkdown">
    <meta charset="UTF-8">
    <meta name="description" content="a blog demo">
    <meta name="author" content="qinguoming">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="quarkdown:root-path" content="..">
    <title>blog</title>
    <script src="../script/quarkdown.js"></script>
    <script>const capabilities = window.quarkdownCapabilities</script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css" rel="stylesheet">
    <link href="../theme/theme.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.9.0/highlightjs-line-numbers.min.js"></script>
    <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
    <link href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css" rel="stylesheet">
    <script>capabilities.code = true;</script>
    <style>@font-face { font-family: '-503305824'; src: local('Consolas'); }

body {
    --qd-code-custom-font: '-503305824';
    --qd-main-font-size: 12.0pt;}

body.quarkdown-plain.quarkdown-plain,
body.quarkdown-docs.quarkdown-docs {
}

body.quarkdown-slides.quarkdown-slides .reveal {
}

@page {
    size: auto auto;
    margin: 0;}

p {
}</style>
    <script>prepare(new PlainDocument());</script>
<template id="sidebar-template"><nav class="sidebar" role="doc-toc"><ol><li data-target-id="notefempy不同软件的刚度矩阵转换" data-depth="1"><a href="#notefempy不同软件的刚度矩阵转换">Note_FemPy_不同软件的刚度矩阵转换</a><ol><li data-target-id="code" data-depth="2"><a href="#code">Code</a></li></ol></li></ol></nav>
</template>  </head>
  <body class="quarkdown quarkdown-plain">
    <aside class="margin-area" id="margin-area-left"></aside>
    <main><div class="page-break" data-hidden=""></div><h1 id="notefempy不同软件的刚度矩阵转换">Note_FemPy_不同软件的刚度矩阵转换</h1><p>对于1-2-3坐标系:</p><figure><img src="media/2026433-20240822100643277-1291259115@1814294603.png" alt="img" /></figure><p>应力矩阵如下:</p><p>$$
\left.[\sigma]=\left[\begin{array}{ccc}\sigma_{11}&\sigma_{12}&\sigma_{13}\\\sigma_{12}&\sigma_{22}&\sigma_{23}\\\sigma_{13}&\sigma_{23}&\sigma_{33}\end{array}\right.\right]
$$</p><p>张量应变矩阵如下:</p><p>$$
\left.[\varepsilon]=\left[\begin{array}{ccc}\varepsilon_{11}&\varepsilon_{12}&\varepsilon_{13}\\\varepsilon_{12}&\varepsilon_{22}&\varepsilon_{23}\\\varepsilon_{13}&\varepsilon_{23}&\varepsilon_{33}\end{array}\right.\right]
$$</p><blockquote><p>工程剪应变$\gamma=2*\varepsilon$</p></blockquote><p>实际使用中会写成向量的形式:</p><p>$$
\boldsymbol{\sigma}=[\sigma_{1} \quad \sigma_{2} \quad \sigma_{3} \quad \tau_{4} \quad \tau_{5} \quad \tau_{6}]
$$</p><p>$$
\boldsymbol{\epsilon}=[\epsilon_{1} \quad \epsilon_{2} \quad \epsilon_{3} \quad \gamma_{4} \quad \gamma_{5} \quad \gamma_{6}]
$$</p><p>但是不同的商业软件,书籍中,应力/应变向量的含义并不完全一致,导致刚度柔度矩阵需要注意区分.</p><p>在==复合材料力学. 胡更开第二版==,以及==Mechanics Of Composites Materials. Robert M.Jones 第二版==中,应力/应变的简写表示为:</p><p>$$
\begin{matrix}  \sigma_{11} \rightarrow \sigma_1 &amp; \epsilon_{11} \rightarrow \epsilon_1 \  \sigma_{22} \rightarrow \sigma_2 &amp; \epsilon_{22} \rightarrow \epsilon_2 \  \sigma_{33} \rightarrow \sigma_3 &amp; \epsilon_{33} \rightarrow \epsilon_3 \  \tau_{23} \rightarrow \sigma_4 &amp; \gamma_{23}=2\epsilon_{23} \rightarrow \epsilon_4 \  \tau_{13} \rightarrow \sigma_5 &amp; \gamma_{13}=2\epsilon_{13} \rightarrow \epsilon_5 \  \tau_{12} \rightarrow \sigma_6 &amp;\gamma_{12}=2\epsilon_{12} \rightarrow \epsilon_6 \end{matrix}
$$</p><p>以上可以称为**&ldquo;Standard Convention&rdquo;**</p><p>其他商业软件中的conventions:</p><figure><img src="media/2026433-20240616195012334-1195664983@-940698962.png" alt="1" /></figure><p>根据上表,可愿意定义一个转换矩阵T,将应变应力从标准Voigt形式转换到Abaqus,Ls-dyna,Ansys等软件的应力应变形式:</p><p>$$
{\sigma_A}=[T]{\sigma}
$$</p><p>$$
[T]=\left[\begin{array}{cccccc}1&0&0&0&0&0\\0&1&0&0&0&0\\0&0&1&0&0&0\\0&0&0&0&0&1\\0&0&0&0&1&0\\0&0&0&1&0&0\end{array}\right]
$$</p><p>使用以上的T矩阵,就可以将应变应力从标准张量形式转换到Abaqus的notation.此外,刚度矩阵的转换为:</p><p>$$
[C_A]=[T]^T[C][T]
$$</p><p>For LS-DYNAand ANSYS, the transformation matrix is:</p><p>$$
[T]=\left[\begin{array}{cccccc}1&0&0&0&0&0\\0&1&0&0&0&0\\0&0&1&0&0&0\\0&0&0&0&0&1\\0&0&0&1&0&0\\0&0&0&0&1&0\end{array}\right]
$$</p><h2 id="code">Code</h2><p>根据以上公式,可以写出转换代码:</p><pre><code class="language-python">def tMatrix(target:str=&#39;abq-sta&#39;)-&gt;np.ndarray:
    &quot;&quot;&quot;定义一个转换矩阵T,将应变应力从标准Voigt形式转换到Abaqus,Ls-dyna,Ansys等软件的应力应变形式&quot;&quot;&quot;
    match target:
        case &#39;abq-sta&#39;:
            # Abaqus/Standard应力应变形式
            t=np.array([[1,0,0,0,0,0],
                        [0,1,0,0,0,0],
                        [0,0,1,0,0,0],
                        [0,0,0,0,0,1],
                        [0,0,0,0,1,0],
                        [0,0,0,1,0,0]],dtype=float)
        case &#39;ls-dyna&#39;:
            # Ls-dyna应力应变形式
            t=np.array([[1,0,0,0,0,0],
                        [0,1,0,0,0,0],
                        [0,0,1,0,0,0],
                        [0,0,0,0,0,1],
                        [0,0,0,1,0,0],
                        [0,0,0,0,1,0]],dtype=float)
        case &#39;ansys&#39;:
            # Ansys应力应变形式
            t=np.array([[1,0,0,0,0,0],
                        [0,1,0,0,0,0],
                        [0,0,1,0,0,0],
                        [0,0,0,0,0,1],
                        [0,0,0,1,0,0],
                        [0,0,0,0,1,0]],dtype=float)
        case &#39;abq-exp&#39;:
            # Abaqus/Explicit应力应变形式
            t=np.array([[1,0,0,0,0,0],
                        [0,1,0,0,0,0],
                        [0,0,1,0,0,0],
                        [0,0,0,0,0,1],
                        [0,0,0,1,0,0],
                        [0,0,0,0,1,0]],dtype=float)
        case _:
            raise ValueError(&quot;target参数错误&quot;)
    return t

def StiffnessFormatTransform(C:np.ndarray,
            target:str=&#39;abq-sta&#39;,
            source:str=&#39;voigt&#39;)-&gt;np.ndarray:
    &quot;&quot;&quot;将标准刚度矩阵C转换为ABAQUS格式的刚度矩阵
    
    input:
    
    C: (6,6) np.ndarray, 标准刚度矩阵
    
    target: str, 目标格式,可选值&#39;abq-sta&#39;(Abaqus/Standard), &#39;ls-dyna&#39;(Ls-dyna), &#39;ansys&#39;(Ansys), &#39;abq-exp&#39;(Abaqus/Explicit)
    
    source: str, 源格式,可选值&#39;voigt&#39;(Voigt格式)
    
    output:
    
    C_target: (6,6) np.ndarray, 目标格式的刚度矩阵
    
    &quot;&quot;&quot;
    t=tMatrix(target)
    if source==&#39;voigt&#39;:
        return t.T.dot(C).dot(t)
    else:
        assert True, f&quot;从{source}到{target}的转换尚未实现&quot;

def StressFormatTransform(S:np.ndarray,
            target:str=&#39;abq-sta&#39;,
            source:str=&#39;voigt&#39;)-&gt;np.ndarray:
    &quot;&quot;&quot;将标准应力向量S={sigma11,sigma22,sigma33,tau23,tau13,tau12}^T转换为target格式的应力向量&quot;&quot;&quot;
    t=tMatrix(target)
    if source==&#39;voigt&#39;:
        return t.dot(S)
    else:
        assert True, f&quot;从{source}到{target}的转换尚未实现&quot;

def StrainFormatTransform(E:np.ndarray,
            target:str=&#39;abq-sta&#39;,
            source:str=&#39;voigt&#39;)-&gt;np.ndarray:
    &quot;&quot;&quot;将标准应变矩阵E={eps11,eps22,eps33,gamma23,gamma13,gamma12}^T转换为target格式的应变矩阵&quot;&quot;&quot;
    t=tMatrix(target)
    if source==&#39;voigt&#39;:
        return t.T.dot(E).dot(t)
    else:
        assert True, f&quot;从{source}到{target}的转换尚未实现&quot;
</code></pre><p>实现了不同notation格式(应力,应变,刚度矩阵)之间的转换,可以根据需要选择使用.</p></main>
    <aside class="margin-area" id="margin-area-right"></aside>
  </body>
</html>
